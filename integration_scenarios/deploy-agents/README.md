# Deploying Agents to Multiple Clusters Using the CP4MCM App Model
When deploying agents to collect data from managed-clusters to be sent back to a central repository, the preferred deployment method should be to use the [CP4MCM App Model](https://www.ibm.com/cloud/garage/dte/tutorial/multi-cluster-application-management) to deploy agents to managed clusters automatically.
## Step 1: Create a ["Klusterlet" Operator](examples/bookinfoMcmOperator/klusterlet-operator/bookinfo-klusterlet-operator) for the agent
This Operator should [directly deploy the agent](examples/bookinfoMcmOperator/klusterlet-operator/bookinfo-klusterlet-operator/helm-charts/bookinfo) and manage its lifecycle in the managed cluster.
## Step 2: Create [Hub Operator](examples/bookinfoMcmOperator/hub-operator/bookinfo-hub-operator)
This Operator will live on the CP4MCM Hub cluster and will deploy CP4MCM custom resources that define a multicluster-application. [The application](examples/bookinfoMcmOperator/hub-operator/bookinfo-hub-operator/helm-charts/bookinfomanager/templates) should **_directly_** deploy the Klusterlet Operator along with its corresponding CRD and an instance of the CR to deploy the agent since the OpenShift Operator Lifecycle Manager may not be installed on all manged-clusters. Any [agent configuration](examples/bookinfoMcmOperator/hub-operator/bookinfo-hub-operator/deploy/crds/demo.cp4mcm.ibm.com_v1alpha1_bookinfomanager_cr.yaml#L14) should be exposed via the Hub-Operator's CRD along with the configuration of the [placement rules](examples/bookinfoMcmOperator/hub-operator/bookinfo-hub-operator/deploy/crds/demo.cp4mcm.ibm.com_v1alpha1_bookinfomanager_cr.yaml#L8) that define which clusters the agent will be installed to. This setup allows the end-user to configure multiple variations of the agent installation to different groups of clusters automatically depending on their labels within CP4MCM.
